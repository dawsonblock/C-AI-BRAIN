FROM python:3.11-slim
ENV PYTHONDONTWRITEBYTECODE=1 PYTHONUNBUFFERED=1
RUN adduser --uid 1001 --disabled-password --gecos "" ocr

WORKDIR /srv/ocr
COPY docker/ocr_stub /srv/ocr

RUN pip install --no-cache-dir fastapi uvicorn

USER ocr
EXPOSE 6001
CMD ["uvicorn", "app:app", "--host", "0.0.0.0", "--port", "6001"]
